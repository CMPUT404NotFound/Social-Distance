(this.webpackJsonprepo=this.webpackJsonprepo||[]).push([[0],{152:function(e,t,a){},171:function(e,t,a){},261:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(28),s=a.n(n),o=a(18),i=a(32),r=Object(i.a)(),l=a(8),j=a(48),u=a(305),b=a(298),h=a(299),d=a(304),p=a(59),O=a(24),m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAATCAYAAADMBm6RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJDSURBVHgBxVjrccIwDHZ6/d90AtIJmg3KCGxARvAI2aDZADZoOkHSCaATJEwATKBa4FyF6ne463fnww/p06c4foQMAHIhBJYLsiwbRSQ0R0F49ornJCKgOArNMenoRQSCNSjDGghEBFCkKh2YsdFJ+DikKsdUDjVeRmlITViZrh1CKdYOji7AH2OUDg0h/qtZCcN1ZnmyvSpb/ctRGjjeDcLQvzFwDHB9ZbkGCNSA3MWchDtGuGTjJdw+kM4jdmdISDIbycYHlhDXsGT+XVLCBrG1xa62PRS4zgJFYeHoiE3rSKYK1FCkJCwDxebMriFjO9LfO2JhYpUuK9LfBGrgkyMfRTzoejzZjjE8ElSAg6oudFdh4dgLCxxH0yv1d2gYlQY8mqbl8vog4rEgdd9ZO5D6JSiwtRrA4cM5Yvw5JeG5yF2D6oGMYMYg7hD7PxKeO6OzkLKGD6See2xfSP2SqF7b1GbBfFrC+yZu1/6Es8Of44nUh5QZpptM7tohmZi9pX5zKVEPRKpSYVHNL+HXUBj2hUkDctOx75SEW9auLHYr1u5J/ZPU8ZKyFHHoWVta7Pi1tr3XTYvfgvD8PNo2HMP5OJjeFBZncIyF3LTaaaA2BLcVSQTzu3QH16+TDv7ClIw02H1ojo2Bf8f8S4eGHeu336U9qFnAwWOPgSphf1MaCIPxi0n1rcD/xXbrC4kJk5neGoJiu4Ww72G8NvaWeHutL3f4uzQ0XEMm7gT43RHx+BkT/vFA32kmUjkmDaPtuvkDyDIkjJmjNw8AAAAASUVORK5CYII=",x=(a(171),a(14)),g=a.n(x),f=Object(c.createContext)(null),v=function(e){return e.split("/").pop()},y=function(e){return e=(e=(e=e.replace("https://","")).replace("http://","")).replaceAll("/","~")},k=a(1),w=function(){var e=Object(c.useContext)(f).setUser,t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],s=a[1],o=Object(c.useState)(!1),i=Object(l.a)(o,2),x=i[0],y=i[1];return Object(k.jsxs)("div",{className:"login_page",children:[Object(k.jsx)("header",{className:"header",children:Object(k.jsxs)("div",{className:"menu",children:[Object(k.jsx)(O.a,{to:"/",children:Object(k.jsx)("img",{src:m,alt:"logo"})}),Object(k.jsx)(O.a,{to:"/signup",children:"Sign Up"})]})}),Object(k.jsxs)("main",{className:"content",children:[Object(k.jsx)("h1",{children:"Log In"}),n&&Object(k.jsx)(u.a,{message:"Error",description:n,type:"error",className:"error",showIcon:!0}),Object(k.jsxs)(b.a,{name:"login",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){y(!0);var a={userName:t.username,password:t.password};g.a.post("https://project-api-404.herokuapp.com/api/login/",a,{}).then((function(t){console.log(t);var a=t.data.author;e(Object(j.a)(Object(j.a)({},a),{},{uuid:v(a.id),token:t.data.token})),function(e,t,a){var c={value:t,expiry:(new Date).getTime()+a};try{sessionStorage.setItem(e,JSON.stringify(c))}catch(n){return console.warn("Failed to save",e,"to session storage"),null}}("user",Object(j.a)(Object(j.a)({},a),{},{uuid:v(a.id),token:t.data.token}),t.data.expires_in),r.push("inbox")})).catch((function(e){e.response&&403===e.response.status?s("Your account has not been activated yet by the server admin."):e.response&&401===e.response.status?s("Either your username or password were incorrect. Please try again."):s("There was an error logging you in."),y(!1)}))},onFinishFailed:function(e){console.log(e)},autoComplete:"off",children:[Object(k.jsx)(b.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(k.jsx)(h.a,{})}),Object(k.jsx)(b.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(k.jsx)(h.a.Password,{})}),Object(k.jsx)(b.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(k.jsx)(d.a,{children:"Remember me"})}),Object(k.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(k.jsx)(p.a,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})})]})]})]})},C=a(127),S=a.n(C),I=a(158),N=a(297),A=a(292),T=a(301),P=a(306),U=a(307),L=a(76),F=(a(261),N.a.TabPane),E=a(83),D=function(e){var t=e.cancel,a=Object(c.useContext)(f).user,n=Object(c.useState)("text/plain"),s=Object(l.a)(n,2),o=s[0],i=s[1],r=Object(c.useState)(""),j=Object(l.a)(r,2),b=j[0],O=j[1],m=Object(c.useState)(""),x=Object(l.a)(m,2),v=x[0],y=x[1],w=Object(c.useState)(""),C=Object(l.a)(w,2),D=C[0],R=C[1],z=Object(c.useState)("PUBLIC"),G=Object(l.a)(z,2),B=G[0],_=G[1],H=Object(c.useState)(null),J=Object(l.a)(H,2),V=J[0],Y=J[1],K=Object(c.useState)(""),M=Object(l.a)(K,2),Z=M[0],Q=M[1],q=Object(c.useState)(!1),W=Object(l.a)(q,2),X=W[0],$=W[1],ee="https://project-api-404.herokuapp.com/api/author/".concat(a.uuid,"/posts/"),te={headers:{Authorization:"Token ".concat(a.token)}},ae=function(e){return new Promise((function(t,a){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(e){return a(e)}}))},ce=function(){var e=Object(I.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t.target.files[0]);case 2:a=e.sent,Y(a),console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"create_page",children:[Z&&Object(k.jsx)(u.a,{message:"Error",description:Z,type:"error",className:"error",showIcon:!0}),Object(k.jsx)("label",{children:"Title"}),Object(k.jsx)(h.a,{placeholder:"Post Title",allowClear:!0,onChange:function(e){y(e.target.value)},value:v}),Object(k.jsx)("label",{children:"Description"}),Object(k.jsx)(h.a.TextArea,{placeholder:"Post Description",allowClear:!0,onChange:function(e){R(e.target.value)},value:D,showCount:!0}),Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,className:"tabs",children:[Object(k.jsx)(F,{tab:"Edit Text",children:Object(k.jsx)(L.a,{className:"textfield",value:b,onChange:function(e){O(e.target.value)}})},"1"),Object(k.jsx)(F,{tab:"Preview",children:Object(k.jsx)(E,{className:"preview",source:b})},"2")]}),Object(k.jsx)(A.a,{children:"Upload Image"}),Object(k.jsx)("input",{type:"file",accept:"image/png",name:"image",onChange:ce}),Object(k.jsx)(A.a,{children:"Visibility Settings"}),Object(k.jsx)(T.a.Group,{onChange:function(e){_(e.target.value)},value:B,children:Object(k.jsxs)(P.b,{align:"center",wrap:!0,children:[Object(k.jsx)(T.a,{value:"PUBLIC",children:"Public"}),Object(k.jsx)(T.a,{value:"FRIENDS",children:"Friends Only"}),Object(k.jsx)(T.a,{value:"SPECIFIC AUTHORS",children:Object(k.jsxs)(P.b,{direction:"vertical",children:["Specific Authors Only","SPECIFIC AUTHORS"===B?Object(k.jsx)(d.a.Group,{options:[{label:"Lee Seokmin",value:"dokyeom"},{label:"Joshua Hong",value:"joshua"},{label:"Wen Junhui",value:"jun"}]}):null]})}),Object(k.jsx)(T.a,{value:"UNLISTED",children:"Unlisted"})]})}),Object(k.jsx)(A.a,{children:"Text Type"}),Object(k.jsx)(T.a.Group,{onChange:function(e){i(e.target.value)},value:o,options:[{label:"Plain Text",value:"text/plain"},{label:"Markdown Text",value:"text/markdown"}]}),Object(k.jsx)(A.a,{}),Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(U.a,{}),onClick:function(){Q(""),$(!0),b&&function(){var e={title:v,content:b,visibility:B,description:D,contentType:o,unlisted:"UNLISTED"===B};g.a.post(ee,e,te).then((function(e){console.log(e),t()})).catch((function(e){console.log(e),Q("There was an error sharing your post. Please try again later."),$(!1)}))}(),V&&function(){var e={title:v,content:V,visibility:B,description:D,contentType:"image/png;base64"},c={headers:{Authorization:"Token ".concat(a.token)}};g.a.post(ee,e,c).then((function(e){console.log(e),t()})).catch((function(e){console.log(e),Q("There was an error sharing your post. Please try again later."),$(!1)}))}(),b||V||(Q("You must have post content and/or an image"),$(!1))},loading:X,className:"submitButton",children:"Send Post"})]})},R=a(308),z=a(309),G=a(310),B=a(311),_=a(165),H=a(293),J=a(303),V=a(300),Y=(a(283),H.a.Sider),K=function(e){var t=e.children,a=Object(c.useContext)(f),n=a.user,s=a.setUser,o=Object(c.useState)(!1),i=Object(l.a)(o,2),j=i[0],u=i[1];return Object(k.jsxs)("div",{className:"main_page",children:[Object(k.jsx)(Y,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:Object(k.jsxs)(J.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["0"],children:[Object(k.jsx)(J.a.Item,{children:Object(k.jsx)(O.a,{to:"/",children:Object(k.jsx)("img",{src:m,alt:"logo"})})},"0"),Object(k.jsx)(J.a.Item,{icon:Object(k.jsx)(R.a,{}),children:Object(k.jsx)(O.a,{to:"/inbox",children:"Inbox"})},"1"),Object(k.jsx)(J.a.Item,{icon:Object(k.jsx)(z.a,{}),children:Object(k.jsx)(O.a,{to:"/explore",children:"Explore"})},"2"),Object(k.jsx)(J.a.Item,{icon:Object(k.jsx)(G.a,{}),children:Object(k.jsx)(O.a,{to:{pathname:"/profile",state:n},children:"Profile"})},"3"),Object(k.jsx)(J.a.Item,{icon:Object(k.jsx)(B.a,{}),onClick:function(){s(null),function(e){try{sessionStorage.removeItem(e)}catch(t){return console.warn("Failed to remove",e,"from session storage"),null}}("user"),r.push("")},children:"LogOut"},"4")]})}),Object(k.jsx)("main",{className:"content",children:t}),Object(k.jsx)(p.a,{className:"create_button",shape:"circle",icon:Object(k.jsx)(_.a,{}),size:"large",onClick:function(){return u(!0)}}),Object(k.jsx)(V.a,{title:"Create a Post",visible:j,style:{top:20},width:"80vw",footer:null,onCancel:function(){u(!1)},destroyOnClose:!0,children:Object(k.jsx)(D,{cancel:function(){u(!1)}})})]})},M=(a(284),a(294)),Z=a(295),Q=a(302),q=function(e){var t=e.post;return Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],className:"post_container",children:[Object(k.jsx)(Z.a,{children:t.author.profileImage?Object(k.jsx)(Q.a,{src:t.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)("p",{children:t.author.displayName}),Object(k.jsx)("h3",{children:t.title}),Object(k.jsx)("p",{className:"post_description",children:t.description})]})]})},W=function(e){var t=e.person,a=Object(c.useContext)(f).user,n=Object(c.useState)(!1),s=Object(l.a)(n,2),o=s[0],i=s[1],r="https://project-api-404.herokuapp.com/api/author/".concat(y(t.id),"/followers/").concat(y(a.id),"/"),j={headers:{Authorization:"Token ".concat(a.token)}};Object(c.useEffect)((function(){v(t.id)!==a.uuid&&g.a.get(r,j).then((function(e){console.log(e),i(!0)})).catch((function(e){console.log(e)}))}));return Object(k.jsxs)("div",{className:"profile_container",children:[Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],children:[Object(k.jsx)(Z.a,{children:t.profileImage?Object(k.jsx)(Q.a,{src:t.profileImage}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{})})}),Object(k.jsx)(Z.a,{flex:1,children:Object(k.jsx)(O.a,{to:{pathname:"/profile",state:t},children:t.displayName})}),Object(k.jsx)(Z.a,{children:o?Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(_.a,{}),onClick:function(){g.a.delete(r,j).then((function(e){console.log(e),i(!1)})).catch((function(e){console.log(e)}))},danger:!0,children:"Unfollow"}):Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(_.a,{}),onClick:function(){g.a.put(r,{},j).then((function(e){console.log(e),i(!0)})).catch((function(e){console.log(e)}))},disabled:v(t.id)===a.uuid,children:"Follow"})})]}),Object(k.jsxs)("div",{className:"source",children:["Source: ",t.host]})]})},X=function(e){var t=e.like,a=Object(c.useContext)(f).user,n=Object(c.useState)(null),s=Object(l.a)(n,2),o=s[0],i=s[1];return Object(c.useEffect)((function(){var e=t.object,c={headers:{Authorization:"Token ".concat(a.token)}};g.a.get(e,c).then((function(e){console.log(e),i(e.data)})).catch((function(e){console.log(e)}))}),[a,t]),Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],className:"post_container",children:[Object(k.jsx)(Z.a,{children:t.author.profileImage?Object(k.jsx)(Q.a,{src:t.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{children:[Object(k.jsxs)("p",{children:[t.author.displayName," likes your post"]}),null!==o&&Object(k.jsx)(O.a,{to:{pathname:"/post",state:o},children:o.title||o.description?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h3",{children:o.title}),Object(k.jsx)("p",{className:"post_description",children:o.description})]}):"Go to post"})]})]})},$=function(){var e=Object(c.useContext)(f).user,t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],s=a[1];return Object(c.useEffect)((function(){var t="https://project-api-404.herokuapp.com/api/author/".concat(e.uuid,"/inbox/"),a={headers:{Authorization:"Token ".concat(e.token)}};g.a.get(t,a).then((function(e){console.log(e),s(e.data.items)})).catch((function(e){console.log(e)}))}),[e]),Object(k.jsx)("div",{className:"inbox_page",children:n&&n.map((function(e,t){switch(e.type.toLowerCase()){default:return Object(k.jsx)(O.a,{to:{pathname:"/post",state:e},children:Object(k.jsx)(q,{post:e},t)},t);case"follow":return Object(k.jsx)(O.a,{to:{pathname:"/profile",state:e.object},children:Object(k.jsx)(W,{post:e,follow:!0},t)},t);case"like":return Object(k.jsx)(X,{like:e},t)}}))})},ee=(a(285),function(){var e=Object(c.useContext)(f).setUser,t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],s=a[1],o=Object(c.useState)(!1),i=Object(l.a)(o,2),x=i[0],y=i[1];return Object(k.jsxs)("div",{className:"signup_page",children:[Object(k.jsx)("header",{className:"header",children:Object(k.jsxs)("div",{className:"menu",children:[Object(k.jsx)(O.a,{to:"/",children:Object(k.jsx)("img",{src:m,alt:"logo"})}),Object(k.jsx)(O.a,{to:"/login",children:"Log In"})]})}),Object(k.jsxs)("main",{className:"content",children:[Object(k.jsx)("h1",{children:"Sign Up"}),n&&Object(k.jsx)(u.a,{message:"Error",description:n,type:"error",className:"error",showIcon:!0}),Object(k.jsxs)(b.a,{name:"signup",labelCol:{span:10},initialValues:{remember:!0},onFinish:function(t){y(!0);var a={userName:t.username,password:t.password,github:t.github,displayName:t.displayName,profileImage:t.profileImage};g.a.post("https://project-api-404.herokuapp.com/api/signup/",a,{}).then((function(t){if(console.log(t),t&&201===t.status){var a=t.data.author;e(Object(j.a)(Object(j.a)({},a),{},{uuid:v(a.id),idURL:a.id,token:t.data.token})),r.push("inbox")}else t&&204===t.status&&(s("Your account has been created but not approved by an administrator yet. Try logging in with your credentials at a later date, or contact the administrator to approve your account."),r.push("login"))})).catch((function(e){e.response&&400===e.response.status?s("The signup information you used is invalid. Please check and try again."):e.response&&409===e.response.status?s("This username already exists. Please try again with a different username."):s("There was an error signing you up."),y(!1)}))},onFinishFailed:function(e){console.log("Failed:",e),s("An error occurred. Please check that you filled in the form correctly.")},autoComplete:"off",children:[Object(k.jsx)(b.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{max:40,message:"Username too long!"}],tooltip:"This is a required field and must be between 1 and 40 characters",children:Object(k.jsx)(h.a,{placeholder:"eg. adalovelace"})}),Object(k.jsx)(b.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(k.jsx)(h.a.Password,{})}),Object(k.jsx)(b.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(k.jsx)(h.a.Password,{})}),Object(k.jsx)(b.a.Item,{label:"Github URL",name:"github",rules:[{type:"url",message:"Github is not a valid URL!"}],children:Object(k.jsx)(h.a,{placeholder:"eg. https://github.com/adalovelace"})}),Object(k.jsx)(b.a.Item,{label:"Display Name",name:"displayName",rules:[],children:Object(k.jsx)(h.a,{placeholder:"eg. Ada Lovelace"})}),Object(k.jsx)(b.a.Item,{label:"Profile Image URL",name:"profileImage",rules:[{type:"url",message:"Profile Image is not a valid URL!"}],children:Object(k.jsx)(h.a,{placeholder:"eg. https://images.com/adalovelace.png"})}),Object(k.jsx)(b.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(k.jsx)(d.a,{children:"Remember me"})}),Object(k.jsx)(b.a.Item,{wrapperCol:{offset:10,span:16},children:Object(k.jsx)(p.a,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})})]})]})]})}),te=(a(286),N.a.TabPane),ae=function(){var e=Object(c.useContext)(f).user,t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],s=a[1],o=Object(c.useState)([]),i=Object(l.a)(o,2),r=i[0],j=i[1];return Object(c.useEffect)((function(){var t={headers:{Authorization:"Token ".concat(e.token)}},a="https://project-api-404.herokuapp.com/api/authors";g.a.get(a,t).then((function(e){console.log(e),s(e.data)})).catch((function(e){console.log(e)})),a="https://project-api-404.herokuapp.com/api/nodes/authors/",g.a.get(a,t).then((function(e){console.log(e),j(e.data)})).catch((function(e){console.log(e)}))}),[e]),Object(k.jsx)("div",{className:"explore_page",children:Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,children:[Object(k.jsx)(te,{tab:"Local Users",style:{paddingInline:"1rem"},children:n&&n.map((function(e,t){return Object(k.jsx)(W,{person:e},t)}))},"1"),Object(k.jsx)(te,{tab:"Remote Users",style:{paddingInline:"1rem"},children:r&&r.items&&r.items.map((function(e,t){return Object(k.jsx)(W,{person:e,remoteUser:!0},t)}))},"2")]})})},ce=a(77),ne=a(296),se=a(313),oe=a(314),ie=a(315),re=a(312),le=a(83),je=a.n(le),ue=(a(287),a(164)),be=function(e){var t=e.post,a=Object(c.useContext)(f).user,n=Object(c.useState)([]),s=Object(l.a)(n,2),o=s[0],i=s[1],r={headers:{Authorization:"Token ".concat(a.token)}},j=Object(c.useCallback)((function(){var e="https://project-api-404.herokuapp.com/api/author/".concat(y(t.author.id),"/posts/").concat(y(t.post_id||t.id),"/likes/");g.a.get(e,r).then((function(e){console.log(e),i(e.data)})).catch((function(e){console.log(e)}))}),[t.id,a.token]);Object(c.useEffect)((function(){j()}),[j]);var u=Object(k.jsx)("div",{children:o&&o.map&&o.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/profile",state:e.author},children:e.author.displayName},t)}))});return Object(k.jsxs)(ce.a,{title:"Like",placement:"bottom",children:[Object(k.jsx)(p.a,{shape:"circle",icon:Object(k.jsx)(re.a,{}),danger:!0,onClick:function(){var e="https://project-api-404.herokuapp.com/api/author/".concat(a.uuid,"/likes/posts/").concat(y(t.post_id||t.id),"/"),c={type:"Like",summary:"".concat(a.displayName," likes your post"),author:a,object:t.url};g.a.post(e,c,r).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},style:{marginLeft:"1rem"}}),Object(k.jsx)(ue.a,{title:"Likes",trigger:"hover",content:u,children:Object(k.jsxs)("span",{style:{marginLeft:"0.5rem"},children:[o.length," likes"]})})]})},he=h.a.TextArea,de=function(e){var t=e.post,a=Object(c.useContext)(f).user,n=Object(c.useState)(""),s=Object(l.a)(n,2),o=s[0],i=s[1];return Object(k.jsxs)("div",{className:"comment_area",children:[Object(k.jsx)(he,{placeholder:"Comment...",allowClear:!0,value:o,onChange:function(e){i(e.target.value)}}),Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(U.a,{}),onClick:function(){var e="https://project-api-404.herokuapp.com/api/author/".concat(v(t.author.id),"/posts/").concat(y(t.id),"/comments/"),c={headers:{Authorization:"Token ".concat(a.token)}},n={type:"Comment",author:a,comment:o,contentType:"text/plain"};g.a.post(e,n,c).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},className:"button",children:"Comment"})]})},pe=a(60),Oe=function(e){var t=e.visible,a=e.setVisible,n=e.post,s=Object(c.useContext)(f).user,o={headers:{Authorization:"Token ".concat(s.token)}};return Object(k.jsx)(V.a,{title:"Delete Post",visible:t,onCancel:function(){a(!1)},okText:"Delete Post",okButtonProps:{danger:!0},icon:Object(k.jsx)(pe.a,{}),onOk:function(){g.a.delete(n.id,o).then((function(e){console.log(e),a(!1),r.push("")})).catch((function(e){console.log(e)}))},children:"Are you sure you would like to delete this post?"})},me=N.a.TabPane,xe=a(83),ge=function(e){var t=e.visible,a=e.setVisible,n=e.post,s=Object(c.useContext)(f).user,o=Object(c.useState)(n.contentType),i=Object(l.a)(o,2),r=i[0],j=i[1],b=Object(c.useState)(n.content),O=Object(l.a)(b,2),m=O[0],x=O[1],v=Object(c.useState)(n.title),y=Object(l.a)(v,2),w=y[0],C=y[1],S=Object(c.useState)(n.description),I=Object(l.a)(S,2),F=I[0],E=I[1],D=Object(c.useState)(n.visibility),R=Object(l.a)(D,2),z=R[0],G=R[1],B=Object(c.useState)(""),_=Object(l.a)(B,2),H=_[0],J=_[1],Y=Object(c.useState)(!1),K=Object(l.a)(Y,2),M=K[0],Z=K[1],Q=n.id,q={headers:{Authorization:"Token ".concat(s.token)}};return Object(k.jsxs)(V.a,{title:"Edit Post",visible:t,onCancel:function(){a(!1)},footer:null,className:"edit_post_modal",children:[H&&Object(k.jsx)(u.a,{message:"Error",description:H,type:"error",className:"error",showIcon:!0}),Object(k.jsx)("label",{children:"Title"}),Object(k.jsx)(h.a,{placeholder:"Post Title",allowClear:!0,onChange:function(e){C(e.target.value)},value:w}),Object(k.jsx)("label",{children:"Description"}),Object(k.jsx)(h.a.TextArea,{placeholder:"Post Description",allowClear:!0,onChange:function(e){E(e.target.value)},value:F,showCount:!0}),Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,className:"tabs",children:[Object(k.jsx)(me,{tab:"Edit Text",children:Object(k.jsx)(L.a,{className:"textfield",value:m,onChange:function(e){x(e.target.value)}})},"1"),Object(k.jsx)(me,{tab:"Preview",children:Object(k.jsx)(xe,{className:"preview",source:m})},"2")]}),Object(k.jsx)(A.a,{children:"Visibility Settings"}),Object(k.jsx)(T.a.Group,{onChange:function(e){G(e.target.value)},value:z,children:Object(k.jsxs)(P.b,{align:"center",wrap:!0,children:[Object(k.jsx)(T.a,{value:"PUBLIC",children:"Public"}),Object(k.jsx)(T.a,{value:"FRIENDS",children:"Friends Only"}),Object(k.jsx)(T.a,{value:"SPECIFIC AUTHORS",children:Object(k.jsxs)(P.b,{direction:"vertical",children:["Specific Authors Only","SPECIFIC AUTHORS"===z?Object(k.jsx)(d.a.Group,{options:[{label:"Lee Seokmin",value:"dokyeom"},{label:"Joshua Hong",value:"joshua"},{label:"Wen Junhui",value:"jun"}]}):null]})}),Object(k.jsx)(T.a,{value:"UNLISTED",children:"Unlisted"})]})}),Object(k.jsx)(A.a,{children:"Text Type"}),Object(k.jsx)(T.a.Group,{onChange:function(e){j(e.target.value)},value:r,options:[{label:"Plain Text",value:"text/plain"},{label:"Markdown Text",value:"text/markdown"}]}),Object(k.jsx)(A.a,{}),Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(U.a,{}),onClick:function(){J(""),Z(!0),m?function(){var e={id:n.id,title:w,content:m,visibility:z,description:F,contentType:r,unlisted:"UNLISTED"===z};g.a.post(Q,e,q).then((function(e){console.log(e),a(!1)})).catch((function(e){console.log(e),J("There was an error sharing your post. Please try again later."),Z(!1)}))}():(J("You must have post content"),Z(!1))},loading:M,className:"submitButton",children:"Send Post"})]})},fe=a(83),ve=function(e){var t=e.visible,a=e.setVisible,n=e.post,s=Object(c.useContext)(f).user,o=Object(c.useState)("PUBLIC"),i=Object(l.a)(o,2),r=i[0],j=i[1],b="[".concat(n.author.displayName,"](").concat(n.author.url,"):\n>")+n.content,h="FWD: "+n.title,d=n.description,O=n.author.url,m=n.source||n.author.url,x=Object(c.useState)(""),v=Object(l.a)(x,2),y=v[0],w=v[1],C=Object(c.useState)(!1),S=Object(l.a)(C,2),I=S[0],N=S[1],P="https://project-api-404.herokuapp.com/api/author/".concat(s.uuid,"/posts/"),L={headers:{Authorization:"Token ".concat(s.token)}},F=[{value:"FRIENDS",label:"Friends Only"}];return"PUBLIC"===n.visibility&&F.push({value:"PUBLIC",label:"Public"}),Object(k.jsxs)(V.a,{title:"Share Post",visible:t,onCancel:function(){a(!1)},footer:null,className:"edit_post_modal",children:[y&&Object(k.jsx)(u.a,{message:"Error",description:y,type:"error",className:"error",showIcon:!0}),Object(k.jsx)(A.a,{children:"Preview"}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Title: "}),h]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Description: "}),d]}),Object(k.jsx)(fe,{className:"preview",source:b}),Object(k.jsx)(A.a,{children:"Visibility Settings"}),Object(k.jsx)(T.a.Group,{onChange:function(e){j(e.target.value)},value:r,options:F}),Object(k.jsx)(A.a,{}),Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(U.a,{}),onClick:function(){w(""),N(!0),b?function(){var e={id:n.id,title:h,content:b,visibility:r,description:d,contentType:"text/markdown",source:O,origin:m};g.a.post(P,e,L).then((function(e){console.log(e),a(!1)})).catch((function(e){console.log(e),w("There was an error sharing your post. Please try again later."),N(!1)}))}():(w("You must have post content"),N(!1))},loading:I,className:"submitButton",children:"Share Post"})]})},ye=function(){var e=Object(o.g)().state,t=Object(c.useContext)(f).user,a=Object(c.useState)([]),n=Object(l.a)(a,2),s=n[0],i=n[1],r=Object(c.useState)(!1),j=Object(l.a)(r,2),u=j[0],b=j[1],h=Object(c.useState)(!1),d=Object(l.a)(h,2),m=d[0],x=d[1],v=Object(c.useState)(!1),w=Object(l.a)(v,2),C=w[0],S=w[1],I=Object(c.useState)(!1),N=Object(l.a)(I,2),A=N[0],T=N[1],P={headers:{Authorization:"Token ".concat(t.token)}};return Object(c.useEffect)((function(){!function(t){var a=e.comments;g.a.get(a,P).then((function(e){i(e.data.comments)})).catch((function(e){console.log(e)}))}(),e.author.id===t.id&&b(!0)}),[]),Object(k.jsxs)("div",{className:"post_page",children:[Object(k.jsxs)("div",{className:"post_container",children:[Object(k.jsxs)(M.a,{align:"top",gutter:[16,16],wrap:!1,children:[Object(k.jsx)(Z.a,{children:e.author.profileImage?Object(k.jsx)(Q.a,{src:e.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(O.a,{to:{pathname:"/profile",state:e.author},children:e.author.displayName}),Object(k.jsx)("h3",{children:e.title}),Object(k.jsx)("p",{className:"post_description",children:e.description}),"image/png;base64"===e.contentType||"image/jpeg;base64"===e.contentType?Object(k.jsx)("img",{src:e.content.includes(e.contentType)?e.content:"data:"+e.contentType+","+e.content,className:"post_content",alt:e.description}):"text/markdown"===e.contentType?Object(k.jsx)(je.a,{source:e.content,className:"post_content"}):Object(k.jsx)("p",{children:e.content})]})]}),Object(k.jsxs)(M.a,{justify:"end",children:[u?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ce.a,{title:"Delete",children:Object(k.jsx)(p.a,{type:"primary",shape:"circle",icon:Object(k.jsx)(se.a,{}),onClick:function(){S(!0)},danger:!0})}),e.origin===e.id&&Object(k.jsx)(ce.a,{title:"Edit",children:Object(k.jsx)(p.a,{type:"primary",shape:"circle",icon:Object(k.jsx)(oe.a,{}),style:{marginLeft:"1rem"},onClick:function(){x(!0)}})},"comment-basic-like")]}):Object(k.jsx)(p.a,{type:"primary",shape:"circle",icon:Object(k.jsx)(ie.a,{}),onClick:function(){T(!0)}}),Object(k.jsx)(be,{post:e})]})]}),Object(k.jsx)(de,{post:e}),s&&s.map((function(e,a){return Object(k.jsx)(ne.a,{className:"comment_container",author:e.author.displayName,avatar:e.author.profileImage?Object(k.jsx)(Q.a,{src:e.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64}),content:Object(k.jsxs)(k.Fragment,{children:[e.comment,Object(k.jsx)(ce.a,{title:"Like",children:Object(k.jsx)(p.a,{shape:"circle",icon:Object(k.jsx)(re.a,{}),danger:!0,onClick:function(){!function(e){var a="https://project-api-404.herokuapp.com/api/author/".concat(t.uuid,"/likes/comments/").concat(y(e.id),"/"),c={type:"Like",summary:"".concat(t.displayName," likes your comment"),author:t,object:e};g.a.post(a,c,P).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}(e)},style:{display:"block",marginLeft:"auto"}})},"comment-basic-like")]})},a)})),Object(k.jsx)(Oe,{visible:C,setVisible:S,post:e}),Object(k.jsx)(ge,{visible:m,setVisible:x,post:e}),Object(k.jsx)(ve,{visible:A,setVisible:T,post:e})]})},ke=function(){return Object(k.jsx)(u.a,{message:"Error 404: Page Not Found",description:"The page you were trying to reach does not exist or was taken down. Confirm that your URL is correct or contact your system administrator.",type:"error",showIcon:!0,style:{margin:"2rem"}})},we=a(161),Ce=(a(152),function(e){var t=e.visible,a=e.setVisible,n=Object(c.useContext)(f),s=n.setUser,o=n.user,i=Object(c.useState)(!1),r=Object(l.a)(i,2),d=r[0],O=r[1],m=Object(c.useState)(""),x=Object(l.a)(m,2),v=x[0],y=x[1],w="https://project-api-404.herokuapp.com/api/author/".concat(o.uuid,"/"),C={headers:{Authorization:"Token ".concat(o.token)}};return Object(k.jsxs)(V.a,{title:"Edit Profile",visible:t,onCancel:function(){a(!1)},footer:null,children:[v&&Object(k.jsx)(u.a,{message:"Error",description:v,type:"error",className:"error",showIcon:!0}),Object(k.jsxs)(b.a,{name:"signup",initialValues:{github:o.github,profileImage:o.profileImage,displayName:o.displayName},onFinish:function(e){O(!0);var t={id:o.url+"/",github:e.github||o.github,displayName:e.displayName||o.displayName,profileImage:e.profileImage||o.profileImage};g.a.post(w,t,C).then((function(t){console.log(t),s(Object(j.a)(Object(j.a)({},o),{},{github:e.github||o.github,displayName:e.displayName||o.displayName,profileImage:e.profileImage||o.profileImage})),a(!1)})).catch((function(){y("The profile information you used is invalid. Please check and try again."),O(!1)}))},onFinishFailed:function(e){console.log("Failed:",e),y("An error occurred. Please check that you filled in the form correctly.")},autoComplete:"off",children:[Object(k.jsx)(b.a.Item,{label:"Github URL",name:"github",rules:[{type:"url",message:"Github is not a valid URL!"}],children:Object(k.jsx)(h.a,{placeholder:"eg. https://github.com/adalovelace"})}),Object(k.jsx)(b.a.Item,{label:"Display Name",name:"displayName",rules:[],children:Object(k.jsx)(h.a,{placeholder:"eg. Ada Lovelace"})}),Object(k.jsx)(b.a.Item,{label:"Profile Image URL",name:"profileImage",rules:[{type:"url",message:"Profile Image is not a valid URL!"}],children:Object(k.jsx)(h.a,{placeholder:"eg. https://images.com/adalovelace.png"})}),Object(k.jsx)(b.a.Item,{wrapperCol:{offset:10,span:16},children:Object(k.jsx)(p.a,{type:"primary",htmlType:"submit",loading:d,children:"Submit"})})]})]})}),Se=function(e){var t=e.event;return Object(k.jsxs)("div",{className:"github_post",children:[Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Activity Type: "}),t.type]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Activity Actor: "}),Object(k.jsx)("a",{href:"https://github.com/"+t.actor,children:t.actor})]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Repository: "}),Object(k.jsx)("a",{href:"https://github.com/"+t.repo,children:t.repo})]})]})},Ie=N.a.TabPane,Ne=function(){var e=Object(o.g)().state,t=Object(c.useContext)(f).user,a=Object(c.useState)([]),n=Object(l.a)(a,2),s=n[0],i=n[1],r=Object(c.useState)([]),j=Object(l.a)(r,2),u=j[0],b=j[1],h=Object(c.useState)(!1),d=Object(l.a)(h,2),m=d[0],x=d[1],w=Object(c.useState)(!1),C=Object(l.a)(w,2),S=C[0],I=C[1],A=Object(c.useState)(null),T=Object(l.a)(A,2),P=T[0],U=T[1],L="https://project-api-404.herokuapp.com/api/author/".concat(y(e.id),"/"),F={headers:{Authorization:"Token ".concat(t.token)}};return Object(c.useEffect)((function(){g.a.get(L+"posts/",F).then((function(e){console.log(e),i(e.data.data||e.data)})).catch((function(e){console.log(e)}))}),[t,e]),Object(c.useEffect)((function(){v(e.id)!==t.uuid&&g.a.get(L+"followers/".concat(y(t.id),"/"),F).then((function(e){console.log(e),x(!0)})).catch((function(e){404===e.response.status?Promise.resolve(e):console.log(e)})),g.a.get(L+"liked/",F).then((function(e){console.log(e),e.data.items.forEach((function(e){g.a.get(e.object,F).then((function(e){console.log(e),"post"===e.data.type&&b((function(t){return[].concat(Object(we.a)(t),[e.data])}))})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)})),g.a.get("https://project-api-404.herokuapp.com/api/github/".concat(v(e.id),"/"),F).then((function(e){console.log(e),U(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(k.jsxs)("div",{className:"profile_page",children:[Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],className:"profile_container",children:[Object(k.jsx)(Z.a,{children:e.profileImage?Object(k.jsx)(Q.a,{src:e.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{flex:1,children:[Object(k.jsx)("strong",{children:"Display Name:"})," ",e.displayName," ",Object(k.jsx)("br",{}),Object(k.jsx)("strong",{children:"GitHub URL:"})," ",e.github?Object(k.jsx)("a",{href:e.github,children:e.github}):"N/A"]}),Object(k.jsx)(Z.a,{children:v(e.id)!==t.uuid?m?Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(_.a,{}),onClick:function(){g.a.delete(L+"followers/".concat(y(t.id),"/"),F).then((function(e){console.log(e),x(!1)})).catch((function(e){console.log(e)}))},danger:!0,children:"Unfollow"}):Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(_.a,{}),onClick:function(){g.a.put(L+"followers/".concat(y(t.id),"/"),{},F).then((function(e){console.log(e),x(!0)})).catch((function(e){404===e.response.status?Promise.resolve(e):console.log(e)}))},children:"Follow"}):Object(k.jsx)(p.a,{type:"primary",icon:Object(k.jsx)(oe.a,{}),onClick:function(){I(!0)},children:"Edit Profile"})})]}),Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,style:{background:"white"},children:[Object(k.jsx)(Ie,{tab:"Posts",children:s&&s.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/post",state:e},children:Object(k.jsx)(q,{post:e},t)},t)}))},"1"),Object(k.jsx)(Ie,{tab:"Likes",children:u&&u.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/post",state:e},children:Object(k.jsx)(q,{post:e},t)},t)}))},"2"),P&&Object(k.jsx)(Ie,{tab:"GitHub Stream",children:P.map((function(e,t){return Object(k.jsx)(Se,{event:e})}))},"3")]}),Object(k.jsx)(Ce,{visible:S,setVisible:I})]})},Ae=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){var e=function(e){var t;try{t=sessionStorage.getItem(e)}catch(n){return console.warn("Failed to load",e,"from session storage"),null}if(!t)return console.warn(e,"is not in session storage"),null;var a=new Date,c=JSON.parse(t);return a.getTime()>c.expiry?(console.warn(e,"has expired in session storage"),null):JSON.parse(t)}("user");e&&n(e.value)}),[]),Object(k.jsx)(f.Provider,{value:{user:a,setUser:n},children:a?Object(k.jsxs)(o.d,{children:[Object(k.jsx)(o.b,{exact:!0,path:"/createpost",children:Object(k.jsx)(D,{})}),Object(k.jsx)(o.b,{exact:!0,path:"/inbox",children:Object(k.jsx)(K,{children:Object(k.jsx)($,{})})}),Object(k.jsx)(o.b,{exact:!0,path:"/explore",children:Object(k.jsx)(K,{children:Object(k.jsx)(ae,{})})}),Object(k.jsx)(o.b,{exact:!0,path:"/post",children:Object(k.jsx)(K,{children:Object(k.jsx)(ye,{})})}),Object(k.jsx)(o.b,{exact:!0,path:"/profile",children:Object(k.jsx)(K,{children:Object(k.jsx)(Ne,{})})}),Object(k.jsx)(o.b,{exact:!0,path:"/",children:Object(k.jsx)(K,{children:Object(k.jsx)($,{})})}),Object(k.jsx)(o.b,{component:ke})]}):Object(k.jsxs)(o.d,{children:[Object(k.jsx)(o.b,{exact:!0,path:"/signup",children:Object(k.jsx)(ee,{})}),Object(k.jsx)(o.b,{exact:!0,path:"/",children:Object(k.jsx)(w,{})}),Object(k.jsx)(o.a,{to:"/"})]})})};a(288),a(289);s.a.render(Object(k.jsx)(o.c,{history:r,children:Object(k.jsx)(Ae,{})}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.2cde3a77.chunk.js.map