(this.webpackJsonprepo=this.webpackJsonprepo||[]).push([[0],{152:function(e,t,a){},171:function(e,t,a){},261:function(e,t,a){},283:function(e,t,a){},284:function(e,t,a){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(28),o=a.n(n),s=a(17),r=a(31),i=Object(r.a)(),l=a(12),j=a(40),u=a(305),b=a(298),p=a(299),d=a(304),h=a(59),O=a(26),m="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAATCAYAAADMBm6RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJDSURBVHgBxVjrccIwDHZ6/d90AtIJmg3KCGxARvAI2aDZADZoOkHSCaATJEwATKBa4FyF6ne463fnww/p06c4foQMAHIhBJYLsiwbRSQ0R0F49ornJCKgOArNMenoRQSCNSjDGghEBFCkKh2YsdFJ+DikKsdUDjVeRmlITViZrh1CKdYOji7AH2OUDg0h/qtZCcN1ZnmyvSpb/ctRGjjeDcLQvzFwDHB9ZbkGCNSA3MWchDtGuGTjJdw+kM4jdmdISDIbycYHlhDXsGT+XVLCBrG1xa62PRS4zgJFYeHoiE3rSKYK1FCkJCwDxebMriFjO9LfO2JhYpUuK9LfBGrgkyMfRTzoejzZjjE8ElSAg6oudFdh4dgLCxxH0yv1d2gYlQY8mqbl8vog4rEgdd9ZO5D6JSiwtRrA4cM5Yvw5JeG5yF2D6oGMYMYg7hD7PxKeO6OzkLKGD6See2xfSP2SqF7b1GbBfFrC+yZu1/6Es8Of44nUh5QZpptM7tohmZi9pX5zKVEPRKpSYVHNL+HXUBj2hUkDctOx75SEW9auLHYr1u5J/ZPU8ZKyFHHoWVta7Pi1tr3XTYvfgvD8PNo2HMP5OJjeFBZncIyF3LTaaaA2BLcVSQTzu3QH16+TDv7ClIw02H1ojo2Bf8f8S4eGHeu336U9qFnAwWOPgSphf1MaCIPxi0n1rcD/xXbrC4kJk5neGoJiu4Ww72G8NvaWeHutL3f4uzQ0XEMm7gT43RHx+BkT/vFA32kmUjkmDaPtuvkDyDIkjJmjNw8AAAAASUVORK5CYII=",x=(a(171),a(18)),g=a.n(x),f=Object(c.createContext)(null),y=function(e){return e.split("/").pop()},v=function(e){return e=(e=(e=e.replace("https://","")).replace("http://","")).replaceAll("/","~")},k=a(2),w=function(){var e=Object(c.useContext)(f).setUser,t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],o=a[1],s=Object(c.useState)(!1),r=Object(l.a)(s,2),x=r[0],v=r[1];return Object(k.jsxs)("div",{className:"login_page",children:[Object(k.jsx)("header",{className:"header",children:Object(k.jsxs)("div",{className:"menu",children:[Object(k.jsx)(O.a,{to:"/",children:Object(k.jsx)("img",{src:m,alt:"logo"})}),Object(k.jsx)(O.a,{to:"/signup",children:"Sign Up"})]})}),Object(k.jsxs)("main",{className:"content",children:[Object(k.jsx)("h1",{children:"Log In"}),n&&Object(k.jsx)(u.a,{message:"Error",description:n,type:"error",className:"error",showIcon:!0}),Object(k.jsxs)(b.a,{name:"login",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){v(!0);var a={userName:t.username,password:t.password};g.a.post("https://project-api-404.herokuapp.com/api/login/",a,{}).then((function(t){console.log(t);var a=t.data.author;e(Object(j.a)(Object(j.a)({},a),{},{uuid:y(a.id),token:t.data.token})),function(e,t,a){var c={value:t,expiry:(new Date).getTime()+a};try{sessionStorage.setItem(e,JSON.stringify(c))}catch(n){return console.warn("Failed to save",e,"to session storage"),null}}("user",Object(j.a)(Object(j.a)({},a),{},{uuid:y(a.id),token:t.data.token}),t.data.expires_in),i.push("inbox")})).catch((function(e){e.response&&403===e.response.status?o("Your account has not been activated yet by the server admin."):e.response&&401===e.response.status?o("Either your username or password were incorrect. Please try again."):o("There was an error logging you in."),v(!1)}))},onFinishFailed:function(e){console.log(e)},autoComplete:"off",children:[Object(k.jsx)(b.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(k.jsx)(p.a,{})}),Object(k.jsx)(b.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(k.jsx)(p.a.Password,{})}),Object(k.jsx)(b.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(k.jsx)(d.a,{children:"Remember me"})}),Object(k.jsx)(b.a.Item,{wrapperCol:{offset:8,span:16},children:Object(k.jsx)(h.a,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})})]})]})]})},A=a(127),C=a.n(A),I=a(158),N=a(297),S=a(292),T=a(301),P=a(306),U=a(307),L=a(113),F=(a(261),N.a.TabPane),D=a(123),E=function(e){var t=e.cancel,a=Object(c.useContext)(f).user,n=Object(c.useState)("text/plain"),o=Object(l.a)(n,2),s=o[0],r=o[1],i=Object(c.useState)(""),j=Object(l.a)(i,2),b=j[0],O=j[1],m=Object(c.useState)(""),x=Object(l.a)(m,2),y=x[0],v=x[1],w=Object(c.useState)(""),A=Object(l.a)(w,2),E=A[0],R=A[1],z=Object(c.useState)("PUBLIC"),G=Object(l.a)(z,2),H=G[0],J=G[1],B=Object(c.useState)(null),Y=Object(l.a)(B,2),_=Y[0],K=Y[1],V=Object(c.useState)(""),M=Object(l.a)(V,2),Z=M[0],Q=M[1],q=Object(c.useState)(!1),X=Object(l.a)(q,2),W=X[0],$=X[1],ee="https://project-api-404.herokuapp.com/api/author/".concat(a.uuid,"/posts/"),te={headers:{Authorization:"Token ".concat(a.token)}},ae=function(e){return new Promise((function(t,a){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(e){return a(e)}}))},ce=function(){var e=Object(I.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t.target.files[0]);case 2:a=e.sent,K(a),console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"create_page",children:[Z&&Object(k.jsx)(u.a,{message:"Error",description:Z,type:"error",className:"error",showIcon:!0}),Object(k.jsx)("label",{children:"Title"}),Object(k.jsx)(p.a,{placeholder:"Post Title",allowClear:!0,onChange:function(e){v(e.target.value)},value:y}),Object(k.jsx)("label",{children:"Description"}),Object(k.jsx)(p.a.TextArea,{placeholder:"Post Description",allowClear:!0,onChange:function(e){R(e.target.value)},value:E,showCount:!0}),Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,className:"tabs",children:[Object(k.jsx)(F,{tab:"Edit Text",children:Object(k.jsx)(L.a,{className:"textfield",value:b,onChange:function(e){O(e.target.value)}})},"1"),Object(k.jsx)(F,{tab:"Preview",children:Object(k.jsx)(D,{className:"preview",source:b})},"2")]}),Object(k.jsx)(S.a,{children:"Upload Image"}),Object(k.jsx)("input",{type:"file",accept:"image/png",name:"image",onChange:ce}),Object(k.jsx)(S.a,{children:"Visibility Settings"}),Object(k.jsx)(T.a.Group,{onChange:function(e){J(e.target.value)},value:H,children:Object(k.jsxs)(P.b,{align:"center",wrap:!0,children:[Object(k.jsx)(T.a,{value:"PUBLIC",children:"Public"}),Object(k.jsx)(T.a,{value:"FRIENDS",children:"Friends Only"}),Object(k.jsx)(T.a,{value:"SPECIFIC AUTHORS",children:Object(k.jsxs)(P.b,{direction:"vertical",children:["Specific Authors Only","SPECIFIC AUTHORS"===H?Object(k.jsx)(d.a.Group,{options:[{label:"Lee Seokmin",value:"dokyeom"},{label:"Joshua Hong",value:"joshua"},{label:"Wen Junhui",value:"jun"}]}):null]})}),Object(k.jsx)(T.a,{value:"UNLISTED",children:"Unlisted"})]})}),Object(k.jsx)(S.a,{children:"Text Type"}),Object(k.jsx)(T.a.Group,{onChange:function(e){r(e.target.value)},value:s,options:[{label:"Plain Text",value:"text/plain"},{label:"Markdown Text",value:"text/markdown"}]}),Object(k.jsx)(S.a,{}),Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(U.a,{}),onClick:function(){Q(""),$(!0),b&&function(){var e={title:y,content:b,visibility:H,description:E,contentType:s,unlisted:"UNLISTED"===H};g.a.post(ee,e,te).then((function(e){console.log(e),t()})).catch((function(e){console.log(e),Q("There was an error sharing your post. Please try again later."),$(!1)}))}(),_&&function(){var e={title:y,content:_,visibility:H,description:E,contentType:"image/png;base64"},c={headers:{Authorization:"Token ".concat(a.token)}};g.a.post(ee,e,c).then((function(e){console.log(e),t()})).catch((function(e){console.log(e),Q("There was an error sharing your post. Please try again later."),$(!1)}))}(),b||_||(Q("You must have post content and/or an image"),$(!1))},loading:W,className:"submitButton",children:"Send Post"})]})},R=a(308),z=a(309),G=a(310),H=a(311),J=a(165),B=a(293),Y=a(303),_=a(300),K=(a(283),B.a.Sider),V=function(e){var t=e.children,a=Object(c.useContext)(f),n=a.user,o=a.setUser,s=Object(c.useState)(!1),r=Object(l.a)(s,2),j=r[0],u=r[1];return Object(k.jsxs)("div",{className:"main_page",children:[Object(k.jsx)(K,{style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:Object(k.jsxs)(Y.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["0"],children:[Object(k.jsx)(Y.a.Item,{children:Object(k.jsx)(O.a,{to:"/",children:Object(k.jsx)("img",{src:m,alt:"logo"})})},"0"),Object(k.jsx)(Y.a.Item,{icon:Object(k.jsx)(R.a,{}),children:Object(k.jsx)(O.a,{to:"/inbox",children:"Inbox"})},"1"),Object(k.jsx)(Y.a.Item,{icon:Object(k.jsx)(z.a,{}),children:Object(k.jsx)(O.a,{to:"/explore",children:"Explore"})},"2"),Object(k.jsx)(Y.a.Item,{icon:Object(k.jsx)(G.a,{}),children:Object(k.jsx)(O.a,{to:{pathname:"/profile",state:n},children:"Profile"})},"3"),Object(k.jsx)(Y.a.Item,{icon:Object(k.jsx)(H.a,{}),onClick:function(){o(null),function(e){try{sessionStorage.removeItem(e)}catch(t){return console.warn("Failed to remove",e,"from session storage"),null}}("user"),i.push("")},children:"LogOut"},"4")]})}),Object(k.jsx)("main",{className:"content",children:t}),Object(k.jsx)(h.a,{className:"create_button",shape:"circle",icon:Object(k.jsx)(J.a,{}),size:"large",onClick:function(){return u(!0)}}),Object(k.jsx)(_.a,{title:"Create a Post",visible:j,style:{top:20},width:"80vw",footer:null,onCancel:function(){u(!1)},destroyOnClose:!0,children:Object(k.jsx)(E,{cancel:function(){u(!1)}})})]})},M=(a(284),a(294)),Z=a(295),Q=a(302),q=function(e){var t=e.post;return Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],className:"post_container",children:[Object(k.jsx)(Z.a,{children:t.author.profileImage?Object(k.jsx)(Q.a,{src:t.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)("p",{children:t.author.displayName}),Object(k.jsx)("h3",{children:t.title}),Object(k.jsx)("p",{className:"post_description",children:t.description})]})]})},X=function(){var e=Object(c.useContext)(f).user,t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],o=a[1];return Object(c.useEffect)((function(){var t="https://project-api-404.herokuapp.com/api/author/".concat(e.uuid,"/inbox/"),a={headers:{Authorization:"Token ".concat(e.token)}};g.a.get(t,a).then((function(e){console.log(e),o(e.data.items)})).catch((function(e){console.log(e)}))}),[e]),Object(k.jsx)("div",{className:"inbox_page",children:n&&n.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/post",state:e},children:Object(k.jsx)(q,{post:e},t)},t)}))})},W=(a(285),function(){var e=Object(c.useContext)(f).setUser,t=Object(c.useState)(""),a=Object(l.a)(t,2),n=a[0],o=a[1],s=Object(c.useState)(!1),r=Object(l.a)(s,2),x=r[0],v=r[1];return Object(k.jsxs)("div",{className:"signup_page",children:[Object(k.jsx)("header",{className:"header",children:Object(k.jsxs)("div",{className:"menu",children:[Object(k.jsx)(O.a,{to:"/",children:Object(k.jsx)("img",{src:m,alt:"logo"})}),Object(k.jsx)(O.a,{to:"/login",children:"Log In"})]})}),Object(k.jsxs)("main",{className:"content",children:[Object(k.jsx)("h1",{children:"Sign Up"}),n&&Object(k.jsx)(u.a,{message:"Error",description:n,type:"error",className:"error",showIcon:!0}),Object(k.jsxs)(b.a,{name:"signup",labelCol:{span:10},initialValues:{remember:!0},onFinish:function(t){v(!0);var a={userName:t.username,password:t.password,github:t.github,displayName:t.displayName,profileImage:t.profileImage};g.a.post("https://project-api-404.herokuapp.com/api/signup/",a,{}).then((function(t){if(console.log(t),t&&201===t.status){var a=t.data.author;e(Object(j.a)(Object(j.a)({},a),{},{uuid:y(a.id),idURL:a.id,token:t.data.token})),i.push("inbox")}else t&&204===t.status&&(o("Your account has been created but not approved by an administrator yet. Try logging in with your credentials at a later date, or contact the administrator to approve your account."),i.push("login"))})).catch((function(e){e.response&&400===e.response.status?o("The signup information you used is invalid. Please check and try again."):e.response&&409===e.response.status?o("This username already exists. Please try again with a different username."):o("There was an error signing you up."),v(!1)}))},onFinishFailed:function(e){console.log("Failed:",e),o("An error occurred. Please check that you filled in the form correctly.")},autoComplete:"off",children:[Object(k.jsx)(b.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{max:40,message:"Username too long!"}],tooltip:"This is a required field and must be between 1 and 40 characters",children:Object(k.jsx)(p.a,{placeholder:"eg. adalovelace"})}),Object(k.jsx)(b.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(k.jsx)(p.a.Password,{})}),Object(k.jsx)(b.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Please confirm your password!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}}],children:Object(k.jsx)(p.a.Password,{})}),Object(k.jsx)(b.a.Item,{label:"Github URL",name:"github",rules:[{type:"url",message:"Github is not a valid URL!"}],children:Object(k.jsx)(p.a,{placeholder:"eg. https://github.com/adalovelace"})}),Object(k.jsx)(b.a.Item,{label:"Display Name",name:"displayName",rules:[],children:Object(k.jsx)(p.a,{placeholder:"eg. Ada Lovelace"})}),Object(k.jsx)(b.a.Item,{label:"Profile Image URL",name:"profileImage",rules:[{type:"url",message:"Profile Image is not a valid URL!"}],children:Object(k.jsx)(p.a,{placeholder:"eg. https://images.com/adalovelace.png"})}),Object(k.jsx)(b.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(k.jsx)(d.a,{children:"Remember me"})}),Object(k.jsx)(b.a.Item,{wrapperCol:{offset:10,span:16},children:Object(k.jsx)(h.a,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})})]})]})]})}),$=(a(286),function(e){var t,a=e.person,n=(e.remoteUser,Object(c.useContext)(f).user),o=Object(c.useState)(!1),s=Object(l.a)(o,2),r=s[0],i=s[1];t="https://project-api-404.herokuapp.com/api/author/".concat(y(a.id),"/followers/").concat(n.uuid,"/");var j={headers:{Authorization:"Token ".concat(n.token)}};Object(c.useEffect)((function(){y(a.id)!==n.uuid&&g.a.get(t,j).then((function(e){console.log(e),i(!0)})).catch((function(e){404===e.response.status?Promise.resolve(e):console.log(e)}))}));return Object(k.jsxs)("div",{className:"profile_container",children:[Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],children:[Object(k.jsx)(Z.a,{children:a.profileImage?Object(k.jsx)(Q.a,{src:a.profileImage}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{})})}),Object(k.jsx)(Z.a,{flex:1,children:Object(k.jsx)(O.a,{to:{pathname:"/profile",state:a},children:a.displayName})}),Object(k.jsx)(Z.a,{children:r?Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(J.a,{}),onClick:function(){g.a.delete(t,j).then((function(e){console.log(e),i(!1)})).catch((function(e){console.log(e)}))},danger:!0,children:"Unfollow"}):Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(J.a,{}),onClick:function(){g.a.put(t,{},j).then((function(e){console.log(e),i(!0)})).catch((function(e){404===e.response.status?Promise.resolve(e):console.log(e)}))},disabled:y(a.id)===n.uuid,children:"Follow"})})]}),Object(k.jsxs)("div",{className:"source",children:["Source: ",a.host]})]})}),ee=N.a.TabPane,te=function(){var e=Object(c.useContext)(f).user,t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],o=a[1],s=Object(c.useState)([]),r=Object(l.a)(s,2),i=r[0],j=r[1];return Object(c.useEffect)((function(){var t={headers:{Authorization:"Token ".concat(e.token)}},a="https://project-api-404.herokuapp.com/api/authors";g.a.get(a,t).then((function(e){console.log(e),o(e.data)})).catch((function(e){console.log(e)})),a="https://project-api-404.herokuapp.com/api/nodes/authors/",g.a.get(a,t).then((function(e){console.log(e),j(e.data)})).catch((function(e){console.log(e)}))}),[e]),Object(k.jsx)("div",{className:"explore_page",children:Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,children:[Object(k.jsx)(ee,{tab:"Local Users",style:{paddingInline:"1rem"},children:n&&n.map((function(e,t){return Object(k.jsx)($,{person:e},t)}))},"1"),Object(k.jsx)(ee,{tab:"Remote Users",style:{paddingInline:"1rem"},children:i&&i.items&&i.items.map((function(e,t){return Object(k.jsx)($,{person:e,remoteUser:!0},t)}))},"2")]})})},ae=a(76),ce=a(296),ne=a(314),oe=a(315),se=a(313),re=a(123),ie=a.n(re),le=(a(287),a(312)),je=function(e){var t=e.post,a=Object(c.useContext)(f).user,n=Object(c.useState)(!1),o=Object(l.a)(n,2);o[0],o[1],"https://project-api-404.herokuapp.com/api/author/".concat(a.uuid,"/posts/"),"Token ".concat(a.token),Object(j.a)({},t);return Object(k.jsx)(h.a,{type:"primary",shape:"circle",icon:Object(k.jsx)(le.a,{}),danger:!0})},ue=a(164),be=function(e){var t=e.post,a=Object(c.useContext)(f).user,n=Object(c.useState)([]),o=Object(l.a)(n,2),s=o[0],r=o[1],i={headers:{Authorization:"Token ".concat(a.token)}},j=Object(c.useCallback)((function(){var e="https://project-api-404.herokuapp.com/api/author/".concat(v(t.author.id),"/posts/").concat(v(t.post_id||t.id),"/likes/");g.a.get(e,i).then((function(e){console.log(e),r(e.data)})).catch((function(e){console.log(e)}))}),[t.id,a.token]);Object(c.useEffect)((function(){j()}),[j]);var u=Object(k.jsx)("div",{children:s&&s.map&&s.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/profile",state:e.author},children:e.author.displayName},t)}))});return Object(k.jsxs)(ae.a,{title:"Like",placement:"bottom",children:[Object(k.jsx)(h.a,{shape:"circle",icon:Object(k.jsx)(se.a,{}),danger:!0,onClick:function(){var e="https://project-api-404.herokuapp.com/api/author/".concat(a.uuid,"/likes/posts/").concat(v(t.post_id||t.id),"/"),c={type:"Like",summary:"".concat(a.displayName," likes your post"),author:a,object:t.url};g.a.post(e,c,i).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},style:{marginLeft:"1rem"}}),Object(k.jsx)(ue.a,{title:"Likes",trigger:"hover",content:u,children:Object(k.jsxs)("span",{style:{marginLeft:"0.5rem"},children:[s.length," likes"]})})]})},pe=p.a.TextArea,de=function(e){var t=e.post,a=Object(c.useContext)(f).user,n=Object(c.useState)(""),o=Object(l.a)(n,2),s=o[0],r=o[1];return Object(k.jsxs)("div",{className:"comment_area",children:[Object(k.jsx)(pe,{placeholder:"Comment...",allowClear:!0,value:s,onChange:function(e){r(e.target.value)}}),Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(U.a,{}),onClick:function(){var e="https://project-api-404.herokuapp.com/api/author/".concat(v(t.author.id),"/posts/").concat(v(t.id),"/comments/"),c={headers:{Authorization:"Token ".concat(a.token)}},n={type:"Comment",author:a,comment:s,contentType:"text/plain"};g.a.post(e,n,c).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},className:"button",children:"Comment"})]})},he=a(60),Oe=function(e){var t=e.visible,a=e.setVisible,n=e.post,o=Object(c.useContext)(f).user,s={headers:{Authorization:"Token ".concat(o.token)}};return Object(k.jsx)(_.a,{title:"Delete Post",visible:t,onCancel:function(){a(!1)},okText:"Delete Post",okButtonProps:{danger:!0},icon:Object(k.jsx)(he.a,{}),onOk:function(){g.a.delete(n.id,s).then((function(e){console.log(e),a(!1),i.push("")})).catch((function(e){console.log(e)}))},children:"Are you sure you would like to delete this post?"})},me=function(){var e=Object(s.g)().state,t=Object(c.useContext)(f).user,a=Object(c.useState)([]),n=Object(l.a)(a,2),o=n[0],r=n[1],i=Object(c.useState)(!1),j=Object(l.a)(i,2),u=j[0],b=j[1],p=Object(c.useState)(!1),d=Object(l.a)(p,2),m=(d[0],d[1],Object(c.useState)(!1)),x=Object(l.a)(m,2),y=x[0],w=x[1],A=Object(c.useState)(!1),C=Object(l.a)(A,2),I=(C[0],C[1],{headers:{Authorization:"Token ".concat(t.token)}});return Object(c.useEffect)((function(){!function(t){var a=e.comments;g.a.get(a,I).then((function(e){r(e.data.comments)})).catch((function(e){console.log(e)}))}(),e.author.id===t.id&&b(!0)}),[]),Object(k.jsxs)("div",{className:"post_page",children:[Object(k.jsxs)("div",{className:"post_container",children:[Object(k.jsxs)(M.a,{align:"top",gutter:[16,16],wrap:!1,children:[Object(k.jsx)(Z.a,{children:e.author.profileImage?Object(k.jsx)(Q.a,{src:e.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{children:[Object(k.jsx)(O.a,{to:{pathname:"/profile",state:e.author},children:e.author.displayName}),Object(k.jsx)("h3",{children:e.title}),Object(k.jsx)("p",{className:"post_description",children:e.description}),"image/png;base64"===e.contentType||"image/jpeg;base64"===e.contentType?Object(k.jsx)("img",{src:e.content.includes(e.contentType)?e.content:"data:"+e.contentType+","+e.content,className:"post_content",alt:e.description}):"text/markdown"===e.contentType?Object(k.jsx)(ie.a,{source:e.content,className:"post_content"}):Object(k.jsx)("p",{children:e.content})]})]}),Object(k.jsxs)(M.a,{justify:"end",children:[u?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ae.a,{title:"Delete",children:Object(k.jsx)(h.a,{type:"primary",shape:"circle",icon:Object(k.jsx)(ne.a,{}),onClick:function(){w(!0)},danger:!0})}),Object(k.jsx)(ae.a,{title:"Edit",children:Object(k.jsx)(h.a,{type:"primary",shape:"circle",icon:Object(k.jsx)(oe.a,{}),style:{marginLeft:"1rem"}})},"comment-basic-like")]}):Object(k.jsx)(je,{post:e}),Object(k.jsx)(be,{post:e})]})]}),Object(k.jsx)(de,{post:e}),o&&o.map((function(e,a){return Object(k.jsx)(ce.a,{className:"comment_container",author:e.author.displayName,avatar:e.author.profileImage?Object(k.jsx)(Q.a,{src:e.author.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64}),content:Object(k.jsxs)(k.Fragment,{children:[e.comment,Object(k.jsx)(ae.a,{title:"Like",children:Object(k.jsx)(h.a,{shape:"circle",icon:Object(k.jsx)(se.a,{}),danger:!0,onClick:function(){!function(e){var a="https://project-api-404.herokuapp.com/api/author/".concat(t.uuid,"/likes/comments/").concat(v(e.id),"/"),c={type:"Like",summary:"".concat(t.displayName," likes your comment"),author:t,object:e};g.a.post(a,c,I).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}(e)},style:{display:"block",marginLeft:"auto"}})},"comment-basic-like")]})},a)})),Object(k.jsx)(Oe,{visible:y,setVisible:w,post:e})]})},xe=function(){return Object(k.jsx)(u.a,{message:"Error 404: Page Not Found",description:"The page you were trying to reach does not exist or was taken down. Confirm that your URL is correct or contact your system administrator.",type:"error",showIcon:!0,style:{margin:"2rem"}})},ge=a(161),fe=(a(152),function(e){var t=e.visible,a=e.setVisible,n=Object(c.useContext)(f),o=n.setUser,s=n.user,r=Object(c.useState)(!1),i=Object(l.a)(r,2),d=i[0],O=i[1],m=Object(c.useState)(""),x=Object(l.a)(m,2),y=x[0],v=x[1],w="https://project-api-404.herokuapp.com/api/author/".concat(s.uuid,"/"),A={headers:{Authorization:"Token ".concat(s.token)}};return Object(k.jsxs)(_.a,{title:"Edit Profile",visible:t,onCancel:function(){a(!1)},footer:null,children:[y&&Object(k.jsx)(u.a,{message:"Error",description:y,type:"error",className:"error",showIcon:!0}),Object(k.jsxs)(b.a,{name:"signup",initialValues:{github:s.github,profileImage:s.profileImage,displayName:s.displayName},onFinish:function(e){O(!0);var t={id:s.url+"/",github:e.github||s.github,displayName:e.displayName||s.displayName,profileImage:e.profileImage||s.profileImage};g.a.post(w,t,A).then((function(t){console.log(t),o(Object(j.a)(Object(j.a)({},s),{},{github:e.github||s.github,displayName:e.displayName||s.displayName,profileImage:e.profileImage||s.profileImage})),a(!1)})).catch((function(){v("The profile information you used is invalid. Please check and try again."),O(!1)}))},onFinishFailed:function(e){console.log("Failed:",e),v("An error occurred. Please check that you filled in the form correctly.")},autoComplete:"off",children:[Object(k.jsx)(b.a.Item,{label:"Github URL",name:"github",rules:[{type:"url",message:"Github is not a valid URL!"}],children:Object(k.jsx)(p.a,{placeholder:"eg. https://github.com/adalovelace"})}),Object(k.jsx)(b.a.Item,{label:"Display Name",name:"displayName",rules:[],children:Object(k.jsx)(p.a,{placeholder:"eg. Ada Lovelace"})}),Object(k.jsx)(b.a.Item,{label:"Profile Image URL",name:"profileImage",rules:[{type:"url",message:"Profile Image is not a valid URL!"}],children:Object(k.jsx)(p.a,{placeholder:"eg. https://images.com/adalovelace.png"})}),Object(k.jsx)(b.a.Item,{wrapperCol:{offset:10,span:16},children:Object(k.jsx)(h.a,{type:"primary",htmlType:"submit",loading:d,children:"Submit"})})]})]})}),ye=N.a.TabPane,ve=function(){var e=Object(s.g)().state,t=Object(c.useContext)(f).user,a=Object(c.useState)([]),n=Object(l.a)(a,2),o=n[0],r=n[1],i=Object(c.useState)([]),j=Object(l.a)(i,2),u=j[0],b=j[1],p=Object(c.useState)(!1),d=Object(l.a)(p,2),m=d[0],x=d[1],w=Object(c.useState)(!1),A=Object(l.a)(w,2),C=A[0],I=A[1],S="https://project-api-404.herokuapp.com/api/author/".concat(v(e.id),"/"),T={headers:{Authorization:"Token ".concat(t.token)}};Object(c.useEffect)((function(){g.a.get(S+"posts/",T).then((function(e){console.log(e),r(e.data.data||e.data)})).catch((function(e){console.log(e)}))}),[t,e]);Object(c.useEffect)((function(){y(e.id)!==t.uuid&&g.a.get(S+"followers/".concat(v(t.id),"/"),T).then((function(e){console.log(e),x(!0)})).catch((function(e){404===e.response.status?Promise.resolve(e):console.log(e)})),g.a.get(S+"liked/",T).then((function(e){console.log(e),e.data.items.forEach((function(e){g.a.get(e.object,T).then((function(e){console.log(e),"post"===e.data.type&&b((function(t){return[].concat(Object(ge.a)(t),[e.data])}))})).catch((function(e){console.log(e)}))}))})).catch((function(e){console.log(e)}))}),[]);return Object(k.jsxs)("div",{className:"profile_page",children:[Object(k.jsxs)(M.a,{align:"middle",gutter:[16,16],className:"profile_container",children:[Object(k.jsx)(Z.a,{children:e.profileImage?Object(k.jsx)(Q.a,{src:e.profileImage,size:64}):Object(k.jsx)(Q.a,{icon:Object(k.jsx)(G.a,{}),size:64})}),Object(k.jsxs)(Z.a,{flex:1,children:[Object(k.jsx)("strong",{children:"Display Name:"})," ",e.displayName," ",Object(k.jsx)("br",{}),Object(k.jsx)("strong",{children:"GitHub URL:"})," ",e.github?Object(k.jsx)("a",{href:e.github,children:e.github}):"N/A"]}),Object(k.jsx)(Z.a,{children:y(e.id)!==t.uuid?m?Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(J.a,{}),onClick:function(){g.a.delete(S+"followers/".concat(v(t.id),"/"),T).then((function(e){console.log(e),x(!1)})).catch((function(e){console.log(e)}))},danger:!0,children:"Unfollow"}):Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(J.a,{}),onClick:function(){g.a.put(S+"followers/".concat(v(t.id),"/"),{},T).then((function(e){console.log(e),x(!0)})).catch((function(e){404===e.response.status?Promise.resolve(e):console.log(e)}))},children:"Follow"}):Object(k.jsx)(h.a,{type:"primary",icon:Object(k.jsx)(oe.a,{}),onClick:function(){I(!0)},children:"Edit Profile"})})]}),Object(k.jsxs)(N.a,{defaultActiveKey:"1",centered:!0,style:{background:"white"},children:[Object(k.jsx)(ye,{tab:"Posts",children:o&&o.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/post",state:e},children:Object(k.jsx)(q,{post:e},t)},t)}))},"1"),Object(k.jsx)(ye,{tab:"Likes",children:u&&u.map((function(e,t){return Object(k.jsx)(O.a,{to:{pathname:"/post",state:e},children:Object(k.jsx)(q,{post:e},t)},t)}))},"2")]}),Object(k.jsx)(fe,{visible:C,setVisible:I})]})},ke=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){var e=function(e){var t;try{t=sessionStorage.getItem(e)}catch(n){return console.warn("Failed to load",e,"from session storage"),null}if(!t)return console.warn(e,"is not in session storage"),null;var a=new Date,c=JSON.parse(t);return a.getTime()>c.expiry?(console.warn(e,"has expired in session storage"),null):JSON.parse(t)}("user");e&&n(e.value)}),[]),Object(k.jsx)(f.Provider,{value:{user:a,setUser:n},children:a?Object(k.jsxs)(s.d,{children:[Object(k.jsx)(s.b,{exact:!0,path:"/createpost",children:Object(k.jsx)(E,{})}),Object(k.jsx)(s.b,{exact:!0,path:"/inbox",children:Object(k.jsx)(V,{children:Object(k.jsx)(X,{})})}),Object(k.jsx)(s.b,{exact:!0,path:"/explore",children:Object(k.jsx)(V,{children:Object(k.jsx)(te,{})})}),Object(k.jsx)(s.b,{exact:!0,path:"/post",children:Object(k.jsx)(V,{children:Object(k.jsx)(me,{})})}),Object(k.jsx)(s.b,{exact:!0,path:"/profile",children:Object(k.jsx)(V,{children:Object(k.jsx)(ve,{})})}),Object(k.jsx)(s.b,{exact:!0,path:"/",children:Object(k.jsx)(V,{children:Object(k.jsx)(X,{})})}),Object(k.jsx)(s.b,{component:xe})]}):Object(k.jsxs)(s.d,{children:[Object(k.jsx)(s.b,{exact:!0,path:"/signup",children:Object(k.jsx)(W,{})}),Object(k.jsx)(s.b,{exact:!0,path:"/",children:Object(k.jsx)(w,{})}),Object(k.jsx)(s.a,{to:"/"})]})})};a(288),a(289);o.a.render(Object(k.jsx)(s.c,{history:i,children:Object(k.jsx)(ke,{})}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.48d1828f.chunk.js.map